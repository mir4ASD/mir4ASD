<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>miR4ASD: A Database of microRNAs associated in Autism Spectrum Disorder</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    <style>
        :root {
            --primary-color: #0B2D48; /* Deep Blue */
            --secondary-color: #F0F4F8; /* Soft Off-White */
            --accent-color: #E57373; /* Muted Terracotta */
            --text-color: #333;
            --card-bg: #FFFFFF;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-color);
        }

        .header {
            background: linear-gradient(90deg, #4E6E81 0%, #6A8DA6 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }

        .container-fluid {
            padding: 0 30px;
        }

        .card {
            background-color: var(--card-bg);
            border: none;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            padding: 2rem;
        }

        .nav-tabs .nav-link {
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            color: var(--primary-color);
            border-radius: 8px 8px 0 0;
        }

        .nav-tabs .nav-link.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        table.dataTable {
            border-collapse: collapse !important;
            width: 100%;
        }

        table.dataTable thead th {
            background-color: var(--primary-color);
            color: white;
            font-family: 'Montserrat', sans-serif;
        }

        table.dataTable tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        table.dataTable tbody tr:hover {
            background-color: #f1f1f1;
        }

        td.details-control {
            text-align: center;
            cursor: pointer;
        }

        .dataTables_filter {
            margin-bottom: 1rem;
        }



        .filters input {
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 3px;
            width: 100%;
            box-sizing: border-box;
        }

        .child-table {
            padding: 1rem;
            background-color: #f8f9fa;
        }

        .footer {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem 0;
            text-align: center;
        }

        .footer a {
            color: var(--accent-color);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>miR4ASD: A Database of microRNAs associated in Autism Spectrum Disorder</h1>
    </div>

    <div class="container-fluid">
        <div class="card">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="expression-tab" data-bs-toggle="tab" data-bs-target="#expression" type="button" role="tab" aria-controls="expression" aria-selected="true">Expression Studies</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="genetic-tab" data-bs-toggle="tab" data-bs-target="#genetic" type="button" role="tab" aria-controls="genetic" aria-selected="false">Genetic & Other Studies</button>
                </li>
            </ul>
            <div class="tab-content p-3" id="myTabContent">
                <div class="tab-pane fade show active" id="expression" role="tabpanel" aria-labelledby="expression-tab">
                    <table id="expression-table" class="display" style="width:100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th>miRNA ID</th>
                                <th>miRNA mature ID</th>
                                <th>Alteration</th>
                                <th>Tissue</th>
                                <th>Reported</th>
                                <th># studies upregulation</th>
                                <th># studies downregulation</th>
                                <th>Total studies</th>
                            </tr>
                            <tr class="filters">
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>

                        </thead>
                    </table>
                </div>
                <div class="tab-pane fade" id="genetic" role="tabpanel" aria-labelledby="genetic-tab">
                    <table id="other-table" class="display" style="width:100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th>miRNA ID</th>
                                <th>miRNA mature ID</th>
                                <th>Alteration</th>
                                <th>Study description</th>
                            </tr>
                            <tr class="filters">
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                                <th></th>
                            </tr>


                        </thead>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer mt-auto py-3 bg-light">
        <div class="container text-center">
            <span class="text-muted">Â© 2025 miR4ASD | <a href="https://github.com/mir4ASD/mir4ASD">GitHub Repository</a> | This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</span>
        </div>
    </footer>

    <!-- jQuery -->
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables JS -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
    <script>
    function format ( details ) {
        if (!details || details.length === 0) {
            return '<div class="child-table"><p>No study details available.</p></div>';
        }

        let table = '<div class="child-table"><table class="table table-bordered"><thead><tr><th>Study</th><th>Title</th><th>DOI</th><th>Study Type</th><th>Tissue type</th><th>Tissue - subtype</th><th># ASD Samples</th><th># Control Samples</th><th>Others</th></tr></thead><tbody>';
        details.forEach(function(d) {
            table += '<tr>' +
                '<td>' + (d.Study || '') + '</td>' +
                '<td>' + (d.Title || '') + '</td>' +
                '<td><a href="' + (d.DOI || '') + '" target="_blank">' + (d.DOI || '') + '</a></td>' +
                '<td>' + (d["Study Type"] || '') + '</td>' +
                '<td>' + (d["Tissue type"] || '') + '</td>' +
                '<td>' + (d["Tissue - subtype"] || '') + '</td>' +
                '<td>' + (d["# ASD samples"] || '') + '</td>' +
                '<td>' + (d["# Control samples"] || '') + '</td>' +
                '<td>' + (d["# Others"] || '') + '</td>' +
            '</tr>';
        });
        table += '</tbody></table></div>';
        return table;
    }

    $(document).ready(function() {
        function initializeDataTable(tableId, ajaxUrl, columnsConfig) {
            var table = $(tableId).DataTable({
                "ajax": {
                    "url": ajaxUrl,
                    "dataSrc": ""
                },
                "columns": columnsConfig,
                "orderCellsTop": true,
                "fixedHeader": true,
                "initComplete": function () {
                    var api = this.api();
                    api.columns().every(function (colIdx) {
                        var column = this;
                        var header = $(api.column(colIdx).header());
                        if (header.text().trim() !== '') {
                            var input = $('<input type="text" placeholder="Search ' + header.text() + '" />')
                                .appendTo($('tr.filters th', api.table().header()).eq(colIdx))
                                .on('keyup change clear', function () {
                                    if (column.search() !== this.value) {
                                        column.search(this.value).draw();
                                    }
                                });
                        }
                    });
                }
            });
            return table;
        }

        // Expression Studies Table
        var expressionTable = initializeDataTable(
            '#expression-table',
            'expression_studies.json',
            [
                {
                    "className":      'details-control',
                    "orderable":      false,
                    "data":           null,
                    "defaultContent": '<i class="fa-solid fa-plus-circle"></i>'
                },
                { "data": "miRNA ID" },
                { "data": "miRNA mature ID" },
                { "data": "Alteration" },
                { "data": "Tissue" },
                { "data": "Reported" },
                { "data": "# studies upregulation" },
                { "data": "# studies downregulation" },
                { "data": "Total studies" }
            ]
        );

        // Other Studies Table
        var otherTable = initializeDataTable(
            '#other-table',
            'other_studies.json',
            [
                {
                    "className":      'details-control',
                    "orderable":      false,
                    "data":           null,
                    "defaultContent": '<i class="fa-solid fa-plus-circle"></i>'
                },
                { "data": "miRNA ID" },
                { "data": "miRNA mature ID" },
                { "data": "Alteration" },
                { "data": "Study description" }
            ]
        );

        // Add event listener for opening and closing details
        $('tbody').on('click', 'td.details-control', function () {
            var tr = $(this).closest('tr');
            var icon = $(this).find('i');
            var table = $(this).closest('table').DataTable();
            var row = table.row( tr );

            if ( row.child.isShown() ) {
                row.child.hide();
                tr.removeClass('details');
                icon.removeClass('fa-minus-circle').addClass('fa-plus-circle');
            }
            else {
                row.child( format(row.data().StudyDetails) ).show();
                tr.addClass('details');
                icon.removeClass('fa-plus-circle').addClass('fa-minus-circle');
            }
        } );
    });
    </script>
</body>
</html>
